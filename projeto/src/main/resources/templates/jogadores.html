<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../static/css/pages.css">
    <link rel="stylesheet"
        href="./../static/images/assets/fontawesome-free-6.5.2-web/fontawesome-free-6.5.2-web/css/all.css">
    <link rel="stylesheet"
        href="./../static/images/assets/fontawesome-free-6.5.2-web/fontawesome-free-6.5.2-web/css/all.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">
    <link rel="icon" href="../static/images/WhatsApp_Image_2024-07-20_at_15.43.02-removebg-preview.png">
    <title>Nossa Arena</title>
</head>
<style>
    body {


        background-color: white;
        background-image: url(../static/images/layered-waves-haikei\ \(2\)_upscayl_4x_realesrgan-x4plus.png);
        background-repeat: no-repeat;
        /* Impede a repetiÃ§Ã£o da imagem */
        background-size: cover;

        .search-container {
            position: relative;
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        #searchInput {
            width: 100%;
            max-width: 300px;
            padding: 10px 40px 10px 40px;
            /* EspaÃ§o para o Ã­cone Ã  esquerda */
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        #searchInput::placeholder {
            color: #aaa;
        }

        .search-container i {
            position: absolute;
            right: 56.5%;
            top: 23%;
            transform: translateY(30%);
            /* Ajuste para centralizaÃ§Ã£o vertical */
            font-size: 1.4rem;
            color: #00690A;
        }
    }
</style>

<body class="page-jogadores" id="jog-body">
    <nav id="sidebar">
        <div id="sidebar_content">
            <div id="user">
                <img src="../static/images/WhatsApp_Image_2024-07-20_at_15.43.02-removebg-preview.png" id="user_avatar"
                    alt="Avatar">
                <p id="user_infos">
                    <span class="item-description">Nossa Arena</span>
                    <span class="item-description">Software</span>
                </p>
            </div>
            <ul id="side_items">
                <li class="side-item">
                    <a href="home.html">
                        <i class="fa-solid fa-house"></i>
                        <span class="item-description">Inicio</span>
                    </a>
                </li>

                <li class="side-item">
                    <a href="dashboard.html">
                        <i class="fa-solid fa-chart-line"></i>
                        <span class="item-description">Dashboard</span>
                    </a>
                </li>
                <li class="side-item">
                    <a href="horario.html">
                        <i class="fa-solid fa-clock"></i>
                        <span class="item-description">Horarios</span>
                    </a>
                <li class="side-item ">
                    <a href="calendar.html">
                        <i class="fa-solid fa-calendar-days"></i>
                        <span class="item-description">CalendÃ¡rio</span>
                    </a>
                </li>
                <li class="side-item">
                    <a href="cadastro.html">
                        <i class="fa-solid fa-address-card"></i>
                        <span class="item-description">Cadastro</span>
                    </a>
                </li>

                <li class="side-item active">
                    <a href="jogadores.html">
                        <i class="fa-solid fa-futbol"></i>
                        <span class="item-description">Jogadores</span>
                    </a>
                </li>

                <button id="open_btn">
                    <i id="open_btn_icon" class="fa-solid fa-chevron-right"></i>
                </button>
        </div>
        <div id="logout">
            <a href="index.html">
                <button id="logout_btn">
                    <i class="fa-solid fa-right-from-bracket"></i>
            </a>
            <span class="item-description">
                Logout
            </span>

            </button>
        </div>
    </nav>

    <div class="popup sair-popup" id="confirmExitPopup" style="display: none;">
        <aside>
            <img src="../static/images/WhatsApp_Image_2024-07-20_at_15.43.02-removebg-preview.png" alt=""
                class="logo-img">

        </aside>
        <h2>Deseja sair?</h2>

        <div class="popup-buttons">
            <button id="confirmExit">Sim</button>
            <button id="cancelExit">Cancelar</button>
        </div>
    </div>

    <main>
        <header>
            <h1>Nossa <span>Arena</span></h1>
            <div class="contatos">
                <a href="https://www.instagram.com/nossarena_/"> <i class="fa-brands fa-instagram"></i></a>

                <p>|</p>

                <a
                    href="https://api.whatsapp.com/send/?phone=5531999575269&text=Oi!+Vim+pelo+Instagram+e+queria+informa%C3%A7%C3%B5es+sobre+a+NossArena!&type=phone_number&app_absent=0">
                    <i class="fa-brands fa-whatsapp"></i></a>

                <p>|</p>
                <a href="#"><i class="fa-solid fa-envelope"></i></a>

                <p>|</p>


                <a href="#" id="phone-icon">
                    <i class="fa-solid fa-phone"></i>
                </a>

                <p>|</p>
                <a
                    href="https://www.google.com/maps/place/NossArena+Uruc%C3%A2nia/@-20.3589574,-42.7521078,17z/data=!3m1!4b1!4m6!3m5!1s0xa4b9c6f8a90ad7:0x7833dfc79ca6d117!8m2!3d-20.3589574!4d-42.7521078!16s%2Fg%2F11vjg0w6hq?entry=ttu">
                    <i class="fa-solid fa-location-dot"></i></a>
                <div id="notification" style="display: none;">NÃºmero de telefone copiado!</div>
            </div>
            <img src="../static/images/WhatsApp_Image_2024-07-20_at_15.43.02-removebg-preview.png"
                id="user_avatar_secondary" alt="Avatar">
        </header>
        <div id="loading-screen">
            <div class="loader-container">
                <img src="../static/images/WhatsApp_Image_2024-07-20_at_15.43.02-removebg-preview.png"
                    alt="Loading Image" class="loading-image">
                <div class="loader"></div>
            </div>
        </div>

        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="text" id="searchInput" placeholder="Pesquisar por CPF ou Nome">

        </div>

        <div id="confirmPaymentPopup" class="popup" style="display: none;">
            <h2 id="popupTitle">Mensagem de confirmaÃ§Ã£o</h2>
            <div class="popup-buttons">
                <button id="confirmPaymentButton">Sim</button>
                <button id="cancelPaymentButton">Cancelar</button>
            </div>
        </div>

        <div id="confirmDeletePopup" class="popup" style="display: none;">
            <img src="../static/images/Imagem1.png" alt="ConfirmaÃ§Ã£o">
            <h2>Tem certeza que deseja excluir este jogador?</h2>
            <div class="popup-buttons">
                <button id="confirmDeleteButton">Sim</button>
                <button id="cancelDeleteButton">Cancelar</button>
            </div>
        </div>


        <div class="table-jogador">


            <table class="search" id="usuariosTable">
                <thead>
                    <tr>
                        <th>CPF</th>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>Nascimento</th>
                        <th>Quantidade de Partidas</th>
                        <th>AÃ§Ãµes</th>
                    </tr>
                </thead>
                <tbody>
            </table>

        </div>
        <div class="outer-wrapper">
            <div class="table-container">


                <div id="editModal" class="edit-modal">
                    <div class="edit-modal-content">
                        <span id="closeModal" class="close">&times;</span>
                        <h2>Editar Jogador</h2>
                        <form id="editForm">
                            <label for="editNome">Nome:</label>
                            <input type="text" id="editNome" name="nome" required>

                            <label for="editTelefone">Telefone:</label>
                            <input type="text" id="editTelefone" name="telefone">

                            <label for="editNascimento">Nascimento:</label>
                            <input type="date" id="editNascimento" name="nascimento" required>

                            <label for="editQuantidadePartidas">Quantidade de Partidas:</label>
                            <input type="number" id="editQuantidadePartidas" name="quantidadePartidas" readonly>

                            <button type="submit" id="saveEditBtn">Salvar</button>
                        </form>
                    </div>
                </div>

                <div class="birthday-table-container small-table">
                    <h2>ðŸŽ‰ Aniversariantes do MÃªs ðŸŽ‚</h2>
                    <table id="birthday-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Dia</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Linhas serÃ£o preenchidas dinamicamente -->
                        </tbody>
                    </table>
                </div>



    </main>
    <style>
        .birthday-table-container.small-table {
            position: absolute;
            top: 25%;
            /* Alinhado ao topo da tabela de jogadores */
            right: 5%;
            /* MantÃ©m o espaÃ§amento da borda direita */
            width: 350px;
            /* MantÃ©m a largura ajustada */
            max-height: 400px;
            /* MantÃ©m o limite de altura */
            background: #ffffffd9;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            padding: 15px;
            /* Mais espaÃ§amento interno */
            text-align: center;
            overflow-y: auto;
            /* Adiciona barra de rolagem vertical */
        }

        .birthday-table-container.small-table h2 {
            font-size: 1.2rem;
            /* Ajuste para o tÃ­tulo */
            color: #00690A;
            margin-bottom: 15px;
        }

        #birthday-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
        }

        #birthday-table thead {
            background-color: #00690A;
            color: #fff;
            font-size: 1rem;
            /* Tamanho da fonte no cabeÃ§alho */
            position: sticky;
            top: 0;
        }

        #birthday-table th,
        #birthday-table td {
            padding: 10px;
            /* Mais espaÃ§amento nas cÃ©lulas */
            border: 1px solid #ddd;
            text-align: center;
        }

        #birthday-table td {
            font-size: 1.2rem;
            /* Aumenta o tamanho da fonte dos dados */
            font-weight: bold;
            /* Deixa o texto mais destacado */
        }

        #birthday-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
    <script>
        // FunÃ§Ã£o para filtrar a tabela com base no CPF ou Nome
        function filterTable() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.trim().toLowerCase(); // ObtÃ©m o valor da busca em minÃºsculas
            const rows = document.querySelectorAll('#usuariosTable tbody tr'); // Seleciona as linhas da tabela

            rows.forEach(row => {
                const cpfCell = row.cells[0]?.textContent.trim().toLowerCase(); // Coluna CPF
                const nomeCell = row.cells[1]?.textContent.trim().toLowerCase(); // Coluna Nome

                if (cpfCell.includes(searchTerm) || nomeCell.includes(searchTerm)) {
                    row.style.display = ''; // Mostra a linha
                } else {
                    row.style.display = 'none'; // Esconde a linha
                }
            });
        }

        // Adiciona o evento de input ao campo de busca
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', filterTable);
        } else {
            console.error('Campo de busca nÃ£o encontrado.');
        }

        document.addEventListener('DOMContentLoaded', function () {
            const apiUrl = 'http://localhost:8080/usuarios/aniversariantes'; // Endpoint para buscar aniversariantes

            // FunÃ§Ã£o para extrair o dia do mÃªs
            function obterDiaDoMes(dataNascimento) {
                if (!dataNascimento) {
                    return "Data nÃ£o disponÃ­vel"; // Retorna mensagem padrÃ£o se o valor for nulo ou indefinido
                }
                try {
                    const [ano, mes, dia] = dataNascimento.split("-"); // Divide a data no formato ISO (YYYY-MM-DD)
                    return dia; // Retorna apenas o dia
                } catch (error) {
                    console.error("Erro ao processar a data:", error);
                    return "Erro na data";
                }
            }

            // FunÃ§Ã£o para carregar os aniversariantes
            function carregarAniversariantes() {
                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Erro na requisiÃ§Ã£o: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(jogadores => {
                        const tabelaCorpo = document.querySelector('#birthday-table tbody');
                        tabelaCorpo.innerHTML = ''; // Limpa o conteÃºdo da tabela

                        if (jogadores.length === 0) {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                        <td colspan="2">ðŸŽ‰ Nenhum aniversariante neste mÃªs ðŸŽ‚</td>
                    `;
                            tabelaCorpo.appendChild(tr);
                        } else {
                            jogadores.forEach(jogador => {
                                const diaDoMes = obterDiaDoMes(jogador.nascimento);
                                const tr = document.createElement('tr');
                                tr.innerHTML = `
                            <td>ðŸŽ‰ ${jogador.nome}</td>
                            <td>${diaDoMes} ðŸŽ‚</td>
                        `;
                                tabelaCorpo.appendChild(tr);
                            });
                        }
                    })
                    .catch(error => {
                        console.error('Erro ao carregar aniversariantes:', error);
                        const tabelaCorpo = document.querySelector('#birthday-table tbody');
                        tabelaCorpo.innerHTML = `
                    <tr>
                        <td colspan="2">Erro ao carregar os aniversariantes.</td>
                    </tr>
                `;
                    });
            }

            // Chama a funÃ§Ã£o ao carregar a pÃ¡gina
            carregarAniversariantes();
        });


    </script>

    <script src="../static/js/scriptpages.js"></script>
</body>

<style>
    .edit-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        width: 90%;
        max-width: 400px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
    }

    .edit-modal-content {
        display: flex;
        flex-direction: column;
    }

    .close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 18px;
        cursor: pointer;
    }
</style>

</html>